# 概述

LTE驻网流程

## 参考

[MTK驻网小结 ELT工具的使用](https://blog.csdn.net/ZhongGuoRenMei/article/details/103354119)

[LTE中小区选择流程及其S准则详解](https://blog.csdn.net/keyanting_2018/article/details/89325942)


## 注网流程

**1. 开机驻留**

UE开机后在SIM卡初始化还未完成前，会先尝试获取限制服务。获取限制服务后可以支持拨打紧急电话

**2. 初始化SIM卡**

从AP侧可以看到SIM卡READ的状态。从modem侧，过滤NAS消息，当SIM卡初始化完成后会发出CM_SIM_AVAILABLE_CNF消息。

**3. 选择PLMN**

选择PLMN的时候会从SIM卡中读取，及配置文件中读取已有的PLMN信息，如RPLMN(上次驻留的PLMN),HPLMN(SIM卡中的HPLMN),EHPLMN(等价的HPLMN，可以在NV65602中配置)等,device_config配置。

**4. 选择小区**

会先搜索小区，然后选择(S准则)合适小区，最后驻扎在小区上。

1. PSS/SSS同步，实现UE对小区的识别和下行同步
2. SIB/MIB消息的解读
3. 小区选择（S准则）
4. 小区驻扎

**5. 注册**

-随机接入

-Attach请求

-鉴权

-加密

-激活EPS承载

-Attach完成

-位置更新

-获取服务注网成功

**6.连接及重配置、数据传输流程、测量切换流程**

**连接过程：**
UE 发起业务时，更新TA，寻呼响应

**重配置过程:**
网络端下发重配置请求，UE完成后反馈重配置请求完成。主要是参数配置，切换执行等操作。

**数据传输流程：**

**上行数据过程：**
UE发送调度请求
eNB对UE 进行UL资源赋予
UE发送BSR(缓存状态)
eNB对UE 进行UL资源赋予
UE发送数据

**测量切换流程：**
UE接收测量请求
UE发送测量报告
网络端进行判断，如果需要进行切换发送切换请求给UE。

关于协议学习总结
**1.先大概摸清整体分析流程。**
**2.再把各个注网各阶段遇到的问题总结进去**，像扫频阶段，搜网前读取配置文件，选择PLMN阶段，attch阶段，等遇到的问题。
这样后续能快速定位问题是处于哪个阶段，然后在这个阶段继续深入分析。像一些别的可以**单独形成独立模块文档**，如各个网络的信号分析，测量分析，射频资源占用等。

具体日志分析可以参考另外一篇博客

[LTE注网流程分析](http://blog.csdn.net/qq_27540925/article/details/79467754)

更为具体的信令流程可以见下载链接

[LTE信令流程](http://download.csdn.net/download/qq_27540925/10271778)